"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_toPropertyKey(n.key),n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _toPropertyKey(e){e=_toPrimitive(e,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(e,t){if("object"!==_typeof(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);t=r.call(e,t||"default");if("object"!==_typeof(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}!function(){function f(e){for(;e.match(/^\.+\//)||e.startsWith("/");)e=e.substring(e.indexOf("/")+1);return e}function a(e,o){var t=document.createElement("a");t.href="#projects/".concat(o);var r=document.createElement("div");r.classList.add("projectEntry");var i=document.createElement("h2");i.innerText="Loadingâ€¦",r.appendChild(i);for(var a=[],n=0;n<2;n++){var s=document.createElement("img");s.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=",s.alt="",s.setAttribute("aria-hidden","true"),1==n&&s.classList.add("backdrop"),r.appendChild(s),a.push(s)}var c=document.createElement("p");function u(e){i.innerText="Error",c.innerText=e||"Unexpected error",a[0].src=d,a[1].src=d}c.innerText="",r.appendChild(c),t.appendChild(r),e.appendChild(t);var l=function(){if(window.XMLHttpRequest)return new XMLHttpRequest;if(window.ActiveXObject){try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}return null}();l.open("GET","./pages/projects/".concat(o,".json"),!0),l.responseType="json",l.addEventListener("readystatechange",function(){if(4===l.readyState)if(l.status<200||299<l.status)404===l.status?u('Project "'.concat(o,'" not found')):u("HTTP ".concat(l.status,": ").concat(l.statusText));else{var e=-1;try{e=l.response&&l.response.constructor?l.response:JSON.parse(l.responseText)}catch(e){return console.warn(e),void u("Unprocessable entity")}var t=e.title,r=null,n=null;e["project-info"]&&(r=e["project-info"].description,n=e["project-info"].thumbnail),t=t,r=r,n=n,i.innerText=t||"Untitled",t="No description","string"==typeof r&&0<r.length&&(t=r),c.innerText=t,"string"==typeof n&&(n="./assets/"+f(n),a[0].src=n,a[1].src=n)}}),p.add(l)}var d="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8z8DwHwAFBQIAX8jx0gAAAABJRU5ErkJggg==",s=function(){function t(e){_classCallCheck(this,t),this.requests=Array.from(e||[]),this.hasActiveListener=!1,this.abortController=new AbortController,this.update()}return _createClass(t,[{key:"update",value:function(){var r=this;if(!this.abortController.signal.aborted)for(;0<this.requests.length;){var e=function(){var e=r.requests[0];if(!(e instanceof XMLHttpRequest))return r.requests.shift(),"continue";if(4===e.readyState)return r.requests.shift(),"continue";if(r.hasActiveListener)return"break";var t=r;return e.addEventListener("readystatechange",function(){4===e.readyState&&(t.hasActiveListener=!1,t.update())},{signal:r.abortController.signal}),e.send(),r.hasActiveListener=!0,"break"}();if("continue"!==e&&"break"===e)break}}},{key:"add",value:function(e){this.abortController.signal.aborted||(this.requests.push(e),this.update())}},{key:"close",value:function(){if(!this.abortController.signal.aborted){this.abortController.abort();for(var e=0;e<this.requests.length;e++)try{this.requests[e].abort()}catch(e){}}}}]),t}(),p=-1;window.addEventListener("moduleLoad",function(e){if("projects"===e.detail.page){p=new s;var t=document.getElementById("projects-list");if(t){var r,n=document.getElementById("projects-data");if(n){try{r=JSON.parse(n.innerHTML)}catch(e){return void console.warn(e)}if(Array.isArray){if(!Array.isArray(r))return void console.warn("Project list is not an array!")}else if(!r.length)return void console.warn("Project list is not an array!");for(var o=0;o<r.length;o++){var i=f(r[o]);a(t,i)}}}}}),window.addEventListener("moduleUnload",function(e){"projects"===e.detail.page&&(-1!==p&&p.close(),p=-1)})}();